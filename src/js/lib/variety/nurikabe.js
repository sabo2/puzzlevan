/*! @license pzpr.js v3.5.2-pre (c) 2009-2015 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.classmgr.makeCustom(["nurikabe","nuribou","mochikoro","mochinyoro"],{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&this.mousestart&&this.inputqnum()}},KeyEvent:{enablemake:!0},Cell:{numberRemainsUnshaded:!0},Board:{getdir8WareaInfo:function(){for(var a=new this.owner.AreaInfo,b=0;b<this.cellmax;b++)a.id[b]=this.cell[b].isUnshade()?0:null;for(var b=0;b<this.cellmax;b++){var c=this.cell[b];if(0===a.id[c.id]){for(var d=a.addArea(),e=[c],f=0;e.length>0;){var g=e.pop();if(0===a.id[g.id]){d.clist[f++]=g,a.id[g.id]=d.id;for(var h=g.bx,i=g.by,j=this.cellinside(h-2,i-2,h+2,i+2),k=0;k<j.length;k++)0===a.id[j[k].id]&&e.push(j[k])}}d.clist.length=f}}return a}},AreaShadeManager:{enabled:!0},"AreaShadeManager@mochikoro":{enabled:!1},AreaUnshadeManager:{enabled:!0},Flags:{use:!0},"Flags@nurikabe":{use:!0,redblk:!0},Graphic:{paint:function(){this.drawBGCells(),"nurikabe"===this.owner.pid&&this.drawDotCells(!1),this.drawGrid(),this.drawShadedCells(),this.drawNumbers(),this.drawChassis(),this.drawTarget()}},"Graphic@nuribou,mochikoro,mochinyoro":{bgcellcolor_func:"qsub1",bcolor_type:"GREEN"},Encode:{decodePzpr:function(){this.decodeNumber16()},encodePzpr:function(){this.encodeNumber16()},decodeKanpen:function(){this.owner.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.owner.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){"nurikabe"===this.owner.pid?this.decodeCellQnumAns():(this.decodeCellQnum(),this.decodeCellAns())},encodeData:function(){"nurikabe"===this.owner.pid?this.encodeCellQnumAns():(this.encodeCellQnum(),this.encodeCellAns())},kanpenOpen:function(){this.decodeCellQnumAns_kanpen()},kanpenSave:function(){this.encodeCellQnumAns_kanpen()},kanpenOpenXML:function(){this.decodeCellQnumAns_XMLBoard()},kanpenSaveXML:function(){this.encodeCellQnumAns_XMLBoard(),this.encodeCellAns_XMLAnswer()},decodeCellQnumAns_XMLBoard:function(){this.decodeCellXMLBoard(function(a,b){b>0?a.qnum=b:-1===b?a.qsub=1:-2===b?a.qans=1:-3===b&&(a.qnum=-2)})},encodeCellQnumAns_XMLBoard:function(){this.encodeCellXMLBoard(function(a){var b=0;return a.qnum>0?b=a.qnum:-2===a.qnum?b=-3:1===a.qans?b=-2:1===a.qsub&&(b=-1),b})}},"AnsCheck@nurikabe":{checklist:["check2x2ShadeCell","checkNoNumberInUnshade","checkConnectShade","checkDoubleNumberInUnshade","checkNumberAndUnshadeSize"]},"AnsCheck@nuribou#1":{checklist:["checkBou","checkCorners","checkNoNumberInUnshade","checkDoubleNumberInUnshade","checkNumberAndUnshadeSize"]},"AnsCheck@mochikoro,mochinyoro#1":{checklist:["check2x2ShadeCell","checkConnectUnshaded_mochikoro","checkUnshadeRect","checkDoubleNumberInUnshade","checkNumberAndUnshadeSize","checkShadeNotRect@mochinyoro"]},AnsCheck:{checkDoubleNumberInUnshade:function(){this.checkAllBlock(this.getUnshadeInfo(),function(a){return a.isNum()},function(a,b,c){return 2>c},"bkNumGe2")},checkNumberAndUnshadeSize:function(){this.checkAllArea(this.getUnshadeInfo(),function(a,b,c,d){return 0>=d||d===c},"bkSizeNe")}},"AnsCheck@nuribou":{checkBou:function(){this.checkAllArea(this.getShadeInfo(),function(a,b){return 1===a||1===b},"csWidthGt1")},checkCorners:function(){for(var a=this.owner.board,b=this.getShadeInfo(),c=0;c<a.cellmax;c++){var d=a.cell[c];if(d.bx!==a.maxbx-1&&d.by!==a.maxby-1){var e,f=d.adjacent,g=[[d,f.right.adjacent.bottom],[f.right,f.bottom]];for(e=0;2>e&&(!g[e][0].isShade()||!g[e][1].isShade());e++);if(2!==e){var h=b.getRoomByCell(g[e][0]).clist,i=b.getRoomByCell(g[e][1]).clist;if(h.length===i.length){if(this.failcode.add("csCornerSize"),this.checkOnly)break;h.seterr(1),i.seterr(1)}}}}}},"AnsCheck@nurikabe,nuribou":{checkNoNumberInUnshade:function(){this.checkAllBlock(this.getUnshadeInfo(),function(a){return a.isNum()},function(a,b,c){return 0!==c},"bkNoNum")}},"AnsCheck@mochikoro,mochinyoro":{checkConnectUnshaded_mochikoro:function(){this.checkOneArea(this.owner.board.getdir8WareaInfo(),"csDivide8")},checkUnshadeRect:function(){this.checkAllArea(this.getUnshadeInfo(),function(a,b,c){return a*b===c},"cuNotRect")},checkShadeNotRect:function(){this.checkAllArea(this.getShadeInfo(),function(a,b,c){return a*b!==c},"csRect")}},FailCode:{bkNoNum:["数字の入っていないシマがあります。","An area of unshaded cells has no numbers."],bkNumGe2:["1つのシマに2つ以上の数字が入っています。","An area of unshaded cells has plural numbers."],bkSizeNe:["数字とシマの面積が違います。","The number is not equal to the number of the size of the area."]},"FailCode@nuribou":{csWidthGt1:["「幅１マス、長さ１マス以上」ではない黒マスのカタマリがあります。","There is a mass of shaded cells, whose width is more than two."],csCornerSize:["同じ面積の黒マスのカタマリが、角を共有しています。","Masses of shaded cells whose length is the same share a corner."]},"FailCode@mochikoro,mochinyoro":{cuNotRect:["四角形でない白マスのブロックがあります。","There is a block of unshaded cells that is not rectangle."],csRect:["四角形になっている黒マスのブロックがあります。","There is a block of shaded cells that is rectangle."],csDivide8:["孤立した白マスのブロックがあります。","Unshaded cells are devided."]}});