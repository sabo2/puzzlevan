/*! @license pzpr.js v3.5.2 (c) 2009-2015 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.classmgr.makeCustom(["dosufuwa"],{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove&&this.inputData<=0)&&this.inputcell_dosufuwa():this.owner.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputblock())},inputcell_dosufuwa:function(){var a=this.getcell();a.isnull||a===this.mouseCell||1===a.ques||(this.mouseCell=a,null===this.inputData&&(this.btn.Left?this.inputData=1===a.qans?2:2===a.qans?-2:1===a.qsub?0:1:this.btn.Right&&(this.inputData=1===a.qans?0:2===a.qans?1:1===a.qsub?2:-2)),this.inputData>=0?(a.setQans(this.inputData),a.setQsub(0)):(a.setQans(0),a.setQsub(1)),a.draw())},inputblock:function(){var a=this.getcell();a.isnull||(a.setQues(0===a.ques?1:0),a.setQans(0),a.setQsub(0),a.draw())}},Border:{isBorder:function(){return this.isnull||this.ques>0||!(1!==this.sidecell[0].ques&&1!==this.sidecell[1].ques)}},Board:{hasborder:1},AreaRoomManager:{enabled:!0,isvalid:function(a){return 0===a.ques}},Graphic:{gridcolor_type:"LIGHT",cellcolor_func:"ques",dotcolor_type:"PINK",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawShadedCells(),this.drawDotCells(!0),this.drawCircles(),this.drawBorders(),this.drawChassis()},getCircleStrokeColor:function(a){return 1===a.qans?1===a.error?this.errcolor1:this.quescolor:null},getCircleFillColor:function(a){return 1===a.qans?1===a.error?this.errbcolor1:"white":2===a.qans?1===a.error?this.errcolor1:this.quescolor:null}},Encode:{decodePzpr:function(){this.decodeBorder(),this.decodeBlockCell()},encodePzpr:function(){this.encodeBorder_makaro(),this.encodeBlockCell()},decodeBlockCell:function(){var a=0,b=0,c=this.outbstr,d=this.owner.board;for(b=0;b<c.length;b++){var e=c.charAt(b);if(this.include(e,"0","9")||this.include(e,"a","z")?(a+=parseInt(e,36),d.cell[a].ques=1):"."===e&&(a+=35),a++,a>=d.cellmax){b++;break}}this.outbstr=c.substr(b)},encodeBlockCell:function(){for(var a="",b=0,c=this.owner.board,d=0;d<c.cellmax;d++){var e="";1===c.cell[d].ques?e=".":b++,e?(a+=b.toString(36),b=0):36===b&&(a+=".",b=0)}this.outbstr+=a},encodeBorder_makaro:function(){for(var a=this.owner.board,b=[],c=0;c<a.bdmax;c++)b[c]=a.border[c].ques,a.border[c].ques=a.border[c].isBorder()?1:0;this.encodeBorder();for(var c=0;c<a.bdmax;c++)a.border[c].ques=b[c]}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQanssub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQanssub()},decodeAreaRoom_com:function(a){var b=this.owner.board;this.readLine();var c=this.getItemList(b.qrows);this.rdata2Border(a,c);for(var d=0;d<b.cell.length;d++)"#"===c[d]&&(b.cell[d].ques=1);b.rooms.reset()},encodeAreaRoom_com:function(){var a=this.owner.board,b=a.getRoomInfo();this.datastr+=b.max+"\n";for(var c=0;c<a.cellmax;c++)this.datastr+=""+(b.id[c]>0?b.id[c]-1:"#")+" ",(c+1)%a.qcols===0&&(this.datastr+="\n")}},AnsCheck:{checklist:["checkOverUnshadeCircle","checkOverShadeCircle","checkBalloonIsTop","checkIronBallIsBottom","checkNoUnshadeCircle+","checkNoShadeCircle+"],checkOverUnshadeCircle:function(){this.checkAllBlock(this.getRoomInfo(),function(a){return 1===a.qans},function(a,b,c){return 1>=c},"bkUCGe2")},checkOverShadeCircle:function(){this.checkAllBlock(this.getRoomInfo(),function(a){return 2===a.qans},function(a,b,c){return 1>=c},"bkSCGe2")},checkNoUnshadeCircle:function(){this.checkAllBlock(this.getRoomInfo(),function(a){return 1===a.qans},function(a,b,c){return c>=1},"bkNoUC")},checkNoShadeCircle:function(){this.checkAllBlock(this.getRoomInfo(),function(a){return 2===a.qans},function(a,b,c){return c>=1},"bkNoSC")},checkBalloonIsTop:function(){this.checkAllCell(function(a){var b=a.adjacent.top;return 1===a.qans&&!b.isnull&&1!==b.ques&&1!==b.qans},"cuNotTop")},checkIronBallIsBottom:function(){this.checkAllCell(function(a){var b=a.adjacent.bottom;return 2===a.qans&&!b.isnull&&1!==b.ques&&2!==b.qans},"csNotBottom")}},FailCode:{bkUCGe2:["1つの領域に風船が複数入っています。","An area has two or more balloons."],bkSCGe2:["1つの領域に鉄球が複数入っています。","An area has two or more iron balls."],bkNoUC:["風船が入っていない領域があります。","An area has no balloon."],bkNoSC:["鉄球が入っていない領域があります。","An area has no iron ball."],cuNotTop:["風船の上に風船や黒マスがありません。","A balloon is not on the top of the row or under another balloon."],csNotBottom:["鉄球の下の鉄球や黒マスがありません。","An iron ball is not on the bottom of the row or on another iron ball."]}});