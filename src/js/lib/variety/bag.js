/*! @license pzpr.js v3.5.2-pre (c) 2009-2015 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.classmgr.makeCustom(["bag"],{MouseEvent:{mouseinput:function(){var a=this.owner;if(a.playmode){var b=!1;if(this.mousestart)b=!!a.getConfig("bgcolor")&&this.inputBGcolor0();else{if(!this.mousemove)return;b=!!a.getConfig("bgcolor")&&this.inputData>=10}b?this.inputBGcolor(!1):this.btn.Left?this.inputLine():this.btn.Right&&this.inputBGcolor(!0)}else a.editmode&&this.mousestart&&this.inputqnum()},inputBGcolor0:function(){return this.getpos(.25).oncell()},inputBGcolor:function(a){var b=this.getcell();b.isnull||b===this.mouseCell||(null===this.inputData&&(this.inputData=a||this.btn.Left?0===b.qsub?11:1===b.qsub?12:10:0===b.qsub?12:1===b.qsub?10:11),b.setQsub(this.inputData-10),b.draw(),this.mouseCell=b)}},KeyEvent:{enablemake:!0},Cell:{maxnum:function(){return Math.min(255,this.owner.board.qcols+this.owner.board.qrows-1)},minnum:2,inside:!1},Board:{hasborder:2,searchInsideArea:function(){this.cell[0].inside=0!==this.cross[0].lcnt;for(var a=1;a<this.maxby;a+=2){a>1&&(this.getc(1,a).inside=!!(this.getc(1,a-2).inside^this.getb(1,a-1).isLine()));for(var b=3;b<this.maxbx;b+=2)this.getc(b,a).inside=!!(this.getc(b-2,a).inside^this.getb(b-1,a).isLine())}}},LineManager:{borderAsLine:!0},Flags:{bgcolor:!0},Graphic:{gridcolor_type:"DLIGHT",bgcellcolor_func:"qsub2",paint:function(){this.drawBGCells(),this.drawDashedGrid(!1),this.drawLines(),this.drawNumbers(),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeNumber16()},encodePzpr:function(){this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellQsub(),this.decodeBorderLine()},encodeData:function(){this.encodeCellQnum(),this.encodeCellQsub(),this.encodeBorderLine()}},AnsCheck:{checklist:["checkBranchLine","checkCrossLine","checkOneLoop","checkDeadendLine+","checkOutsideNumber","checkViewOfNumber"],checkOutsideNumber:function(){this.owner.board.searchInsideArea(),this.checkAllCell(function(a){return!a.inside&&a.isNum()},"nmOutside")},checkViewOfNumber:function(){for(var a=this.owner.board,b=0;b<a.cellmax;b++){var c=a.cell[b];if(c.isValidNum()){var d,e=new this.owner.CellList,f=c.adjacent;for(e.add(c),d=f.left;!d.isnull&&d.inside;)e.add(d),d=d.adjacent.left;for(d=f.right;!d.isnull&&d.inside;)e.add(d),d=d.adjacent.right;for(d=f.top;!d.isnull&&d.inside;)e.add(d),d=d.adjacent.top;for(d=f.bottom;!d.isnull&&d.inside;)e.add(d),d=d.adjacent.bottom;if(c.qnum!==e.length){if(this.failcode.add("nmSumViewNe"),this.checkOnly)break;e.seterr(1)}}}}},FailCode:{nmOutside:["輪の内側に入っていない数字があります。","There is an outside number."],nmSumViewNe:["数字と輪の内側になる4方向のマスの合計が違います。","The number and the sum of the inside cells of four direction is different."]}});