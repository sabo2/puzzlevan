/*! @license pzpr.js v3.5.2 (c) 2009-2015 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.classmgr.makeCustom(["nanro"],{MouseEvent:{mouseinput:function(){this.owner.playmode?this.mousestart||this.mousemove?this.btn.Left?this.dragnumber_nanro():this.mousemove&&this.btn.Right&&this.inputDot_nanro():this.mouseend&&this.notInputted()&&(this.mouseCell=this.owner.board.emptycell,this.inputqnum()):this.owner.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&(this.mouseCell=this.owner.board.emptycell,this.inputqnum()))},dragnumber_nanro:function(){var a=this.getcell();a.isnull||a===this.mouseCell||(this.mouseCell.isnull?(this.inputData=a.getNum(),-2===this.inputData?this.inputData=null:-1===this.inputData&&(1===a.qsub?this.inputData=-2:2===a.qsub&&(this.inputData=-3)),this.mouseCell=a):-1===a.qnum&&(a.setNum(this.inputData),this.mouseCell=a,a.draw()))},inputDot_nanro:function(){var a=this.getcell();a.isnull||a===this.mouseCell||a.isNum()||(null===this.inputData&&(this.inputData=2===a.qsub?0:2),2===this.inputData?(a.setAnum(-1),a.setQsub(2)):0===this.inputData&&(a.setAnum(-1),a.setQsub(0)),this.mouseCell=a,a.draw())}},KeyEvent:{enablemake:!0,enableplay:!0,keyinput:function(a){this.key_view(a)},key_view:function(a){if(this.owner.playmode){var b=this.cursor.getc();"q"===a||"a"===a||"z"===a?a="s1":"w"===a||"s"===a||"x"===a?a="s2":"e"===a||"d"===a||"c"===a||"-"===a?a=" ":"1"===a&&1===b.anum?a="s1":"2"===a&&2===b.anum&&(a="s2")}this.key_inputqnum(a)}},Cell:{numberWithMB:!0,maxnum:function(){return this.owner.board.rooms.getCntOfRoomByCell(this)}},Board:{qcols:8,qrows:8,hasborder:1,getErrorRoomInfo:function(){for(var a=this.getRoomInfo(),b=1;b<=a.max;b++){for(var c=a.area[b],d=c.clist,e=[],f=0,g=-1,h=0;h<d.length;h++){var i=d[h].getNum();-1!==i&&(isNaN(e[i])?(f++,g=i,e[i]=1):e[i]++)}c.number=g,c.numcnt=e[g],c.numkind=f}return a}},AreaNumberManager:{enabled:!0},AreaRoomManager:{enabled:!0},Graphic:{gridcolor_type:"LIGHT",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawMBs(),this.drawNumbers(),this.drawBorders(),this.drawChassis(),this.drawCursor()}},Encode:{decodePzpr:function(){this.decodeBorder(),this.decodeNumber16()},encodePzpr:function(){this.encodeBorder(),this.encodeNumber16()},decodeKanpen:function(){this.owner.fio.decodeAreaRoom(),this.owner.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.owner.fio.encodeAreaRoom(),this.owner.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeCellAnumsub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeCellAnumsub()}},AnsCheck:{checklist:["check2x2NumberCell","checkSideAreaNumber","checkNotMultiNum","checkNumCountOver","checkConnectNumber","checkNumCountLack","checkNoEmptyArea"],getErrorRoomInfo:function(){return this._info.eroom=this._info.eroom||this.owner.board.getErrorRoomInfo()},check2x2NumberCell:function(){this.check2x2Block(function(a){return a.isNum()},"nm2x2")},checkSideAreaNumber:function(){this.checkSideAreaCell(this.getErrorRoomInfo(),function(a,b){return a.sameNumber(b)},!1,"cbSameNum")},checkNotMultiNum:function(){this.checkAllErrorRoom(function(a){return!(a.numkind>1)},"bkPlNum")},checkNumCountLack:function(){this.checkAllErrorRoom(function(a){return!(1===a.numkind&&a.number>a.numcnt)},"nmCountLt")},checkNumCountOver:function(){this.checkAllErrorRoom(function(a){return!(1===a.numkind&&a.number<a.numcnt)},"nmCountGt")},checkNoEmptyArea:function(){this.checkAllErrorRoom(function(a){return 0!==a.numkind},"bkNoNum")},checkAllErrorRoom:function(a,b){for(var c=this.getErrorRoomInfo(),d=1;d<=c.max;d++){var e=c.area[d];if(e&&!a(e)){if(this.failcode.add(b),this.checkOnly)break;e.clist.seterr(1)}}}},FailCode:{bkNoNum:["数字が含まれていないブロックがあります。","A block has no number."],nm2x2:["数字が2x2のかたまりになっています。","There is a 2x2 block of numbers."],cbSameNum:["同じ数字が境界線を挟んで隣り合っています。","Adjacent blocks have the same number."],nmCountGt:["入っている数字の数が数字より多いです。","A number is bigger than the size of block."],nmCountLt:["入っている数字の数が数字より少ないです。","A number is smaller than the size of block."]}});