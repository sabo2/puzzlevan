<!DOCTYPE html>
<HTML lang="ja">
<HEAD>
<META CHARSET="utf-8">
<META NAME="robots" CONTENT="noindex,nofollow">
<meta name="viewport" content="width=device-width" />
<link rel="stylesheet" href="./css/sc8.css" type="text/css" />
<script type="text/javascript" src="./js/lib/pzpr.js"></script>
<script type="text/javascript" src="./js/pzpr-ui.js"></script>
<TITLE>Puzzlevan</TITLE>
</HEAD>

<BODY>

<div id="menuboard" class="outofboard">
  <menu id="menupanel" style="display:none;">
   <li><span>__ファイル__File__</span><menu label="__ファイル__File__">
     <li data-popup="newboard"><span>__新規作成__New Board__</span></li>
     <li data-popup="urlinput"><span>__URL入力__Import from URL__</span></li>
     <li data-popup="urloutput"><span>__URL出力__Export URL__</span></li>
     <hr>
     <li data-popup="imagesave" id="menu_imagesave"><span>__画像を保存__Save as image file__</span></li>
   </menu></li>
   <li><span>__編集__Edit__</span><menu label="__編集__Edit__">
     <li><span>__履歴__History__</span> -&gt;<menu label="__履歴__History__">
       <li id="menu_oldest" data-menu-exec="undoall"><span>__最初にジャンプ__Jump to oldest__</span></li>
       <li id="menu_undo" data-press-exec="undo,undostop"><span>__元に戻す/Undo__Undo__</span></li>
       <li id="menu_redo" data-press-exec="redo,redostop"><span>__やり直し/Redo__Redo__</span></li>
       <li id="menu_latest" data-menu-exec="redoall"><span>__最後にジャンプ__Jump to latest__</span></li>
     </menu></li>
     <hr>
     <li data-popup="adjust"><span>__盤面の調整__Adjust the Board__</span></li>
     <li data-popup="turnflip"><span>__反転・回転__Filp/Turn the Board__</span></li>
   </menu></li>
   <li><span>__表示__Display__</span><menu label="__表示__Display__">
     <li data-config="cellsizeval"><span>__表示サイズ__Cell Size__</span> -&gt;<menu label="__表示サイズ__Cell Size__">
       <li data-popup="dispsize"><span>__数値指定__Set by Number__</span></li>
       <hr>
       <li data-value="19"><span>__サイズ 極小__Ex Small__</span></li>
       <li data-value="27"><span>__サイズ 小__Small__</span></li>
       <li data-value="36"><span>__サイズ 標準__Normal__</span></li>
       <li data-value="54"><span>__サイズ 大__Large__</span></li>
       <li data-value="108"><span>__サイズ 特大__Ex Large__</span></li>
     </menu></li>
     <li data-config="font"><span>__フォント__Font Family__</span> -&gt;<menu label="__フォント__Font Family__">
       <li data-value="1"><span>__ゴシック__Sans-Serif__</span></li>
       <li data-value="2"><span>__明朝__Serif__</span></li>
     </menu></li>
     <hr>
     <li class="check" data-config="irowake"><span>__線の色分け__Color coding__</span></li>
     <li class="check" data-config="irowakeblk"><span>__黒マスの色分け__Color coding__</span></li>
     <li class="check" data-config="cursor"><span>__カーソルの表示__Show cursor__</span></li>
     <li class="check" data-config="adjsize"><span>__自動横幅調節__Auto Size Adjust__</span></li>
     <li class="check" data-config="fullwidth"><span>__横幅最大拡張__Expand Canvas Width__</span></li>
     <hr>
     <li data-popup="colors"><span>__色の設定__Change Color__</span></li>
     <li data-menu-exec="repaint"><span>__盤面の再描画__Repaint whole board__</span></li>
   </menu></li>
   <li><span>__設定__Setting__</span><menu label="__設定__Setting__">
     <li data-config="mode"><span>__モード__mode__</span> -&gt;<menu label="__モード__mode__">
       <li data-value="1"><span>__問題作成モード__Edit mode__</span></li>
       <li data-value="3"><span>__回答モード__Answer mode__</span></li>
     </menu></li>
     <li data-config="use"><span>__操作方法__Input Type__</span> -&gt;<menu label="__操作方法__Input Type__">
       <li data-value="1"><span>__左右ボタン__LR Button__</span></li>
       <li data-value="2"><span>__1ボタン__One Button__</span></li>
     </menu></li>
     <li data-config="use_tri"><span>__操作方法__Input Type__</span> -&gt;<menu label="__操作方法__Input Type__">
       <li data-value="1"><span>__クリックした位置__Corner-side__</span></li>
       <li data-value="2"><span>__引っ張り入力__Pull-to-Input__</span></li>
       <li data-value="3"><span>__1ボタン__One Button__</span></li>
     </menu></li>
     <li data-config="disptype_pipelinkr"><span>__表示形式__Display__</span> -&gt;<menu label="__表示形式__Display__">
       <li data-value="1"><span>__○__Circle__</span></li>
       <li data-value="2"><span>__■__Icebarn__</span></li>
     </menu></li>
     <li data-config="disptype_bosanowa"><span>表示形式</span> -&gt;<menu label="表示形式">
       <li data-value="1"><span>__ニコリ紙面形式__Original Type__</span></li>
       <li data-value="2"><span>__倉庫番形式__Sokoban Type__</span></li>
       <li data-value="3"><span>__ワリタイ形式__Waritai Type__</span></li>
     </menu></li>
     <hr>
     <li class="check" data-config="redline"><span>__繋がりチェック__Continuous Check__</span></li>
     <li class="check" data-config="redblk"><span>__繋がりチェック__Continuous Check__</span></li>
     <li class="check" data-config="redblkrb"><span>__繋がりチェック__Continuous Check__</span></li>
     <li class="check" data-config="redroad"><span>__通り道のチェック__Check Road__</span></li>
     <li class="check" data-config="bgcolor"><span>__背景色入力__Input BGcolor__</span></li>
     <li class="check" data-config="autocmp"><span data-disp-pid="!kouchoku">__数字をグレーにする__Set Grey Color__</span
                                            ><span data-disp-pid="kouchoku">__点をグレーにする__Set Grey Color__</span></li>
     <li class="check" data-config="autoerr"><span data-disp-pid="hitori">__重複した数字を表示__Show overlapped number__</span
                                            ><span data-disp-pid="gokigen,wagiri">__斜線の色分け__Slash with color__</span></li>
     <li class="check" data-config="multierr"><span>__複数エラー検出__Check multiple errors__</span></li>
     <li class="check" data-config="enbnonum"><span>__空セル許可__Allow Empty cell__</span></li>
     <li class="check" data-config="dirauxmark"><span>__方向の補助記号__Direction Aux. Mark__</span></li>
     <li class="check" data-config="enline"><span>__線は点の間__Line between points__</span></li>
     <li class="check" data-config="lattice"><span>__格子点チェック__Check lattice point__</span></li>
     <li class="check" data-config="uramashu"><span>__裏ましゅ__Ura-Mashu__</span></li>
     <li class="check" data-config="dispmove"><span>__動かしたように描画__Paint as move__</span></li>
     <li class="check" data-config="snakebd"><span>__へび境界線描画__Draw snake border__</span></li>
     <li class="check" data-config="bdpadding"><span>__空隙つきURL__URL with Padding__</span></li>
     <li class="check" data-config="discolor"><span>__色分け無効化__Disable color__</span></li>
     <li class="check" data-config="autocheck"><span>__正答自動判定__Auto Answer Check__</span></li>
     <li class="check" data-config="lrcheck"><span>__マウス左右反転__Mouse button inversion__</span></li>
     <hr>
     <li data-config="language"><span>__言語__Language__</span> -&gt;<menu label="__言語__Language__">
       <li class="child" data-value="ja"><span>日本語</span></li>
       <li class="child" data-value="en"><span>English</span></li>
     </menu></li>
   </menu></li>
  </menu>
</div>

<div id="quesboard">
  <div id="divques"></div>						<!-- Canvas用 -->
  <div id="btnarea" class="outofboard" style="display:none;">	<!-- Canvas下部のボタン -->
    <button type="button" class="btn btn-ok" id="btncheck" data-button-exec="answercheck">__チェック__Check__</button>
    <button type="button" class="btn" id="btnundo"    data-press-exec="undo,undostop">__戻__&lt;-__</button
   ><button type="button" class="btn" id="btnredo"    data-press-exec="redo,redostop">__進__-&gt;__</button>
    <button type="button" class="btn" id="btnclear"   data-button-exec="ansclear">__回答消去__Erase Answer__</button
   ><button type="button" class="btn" id="btnclear2"  data-button-exec="subclear">__補助消去__Erase Aux. Marks__</button>
    <button type="button" class="btn" id="btnirowake" data-button-exec="irowake" style="display:none;">__色分けしなおす__Change the color of Line__</button>
    <button type="button" class="btn" id="btncircle"  data-button-exec="toggledisp">○</button>
    <button type="button" class="btn" id="btncolor"   data-button-exec="encolorall">__色をつける__Color up__</button>
  </div>
</div>

<!-- ポップアップメニュー(＋キーポップアップ/for_test)用 -->
<div id="popup_parent" class="outofboard">

  <div class="popup">
    <div class="titlebar">__盤面の新規作成__New Board__</div>
    <form name="newboard">
      <span>__盤面を新規作成します。__Create New Board.__</span>
      <br />
      <div id="nb_size">
        <span id="nb_cols">__よこ__Cols__</span>
        <input type="number" name="col" value="1" size=4 maxlength=3 min=1 max=999 />
        <span id="nb_cols_tawa">__横幅 (黄色の数)__Width (Yellows)__</span>
        <br />
        <span id="nb_rows">__たて__Rows__</span>
        <input type="number" name="row" value="1" size=4 maxlength=3 min=1 max=999 />
        <span id="nb_rows_tawa">__高さ__Height__</span>
      </div>
      <div id="nb_size_sudoku">
        <input type="radio" name="size" id="nb_size_sudoku_0" value="0" /> 4x4<br />
        <input type="radio" name="size" id="nb_size_sudoku_4" value="4" /> 6x6<br />
        <input type="radio" name="size" id="nb_size_sudoku_1" value="1" checked /> 9x9<br />
        <input type="radio" name="size" id="nb_size_sudoku_2" value="2" /> 16x16<br />
        <input type="radio" name="size" id="nb_size_sudoku_3" value="3" /> 25x25
      </div>
      <br />
      <table id="nb_shape_tawa" border=0 cell-padding=0 cell-spaceing=2><tr>
        <td><div id="nb_shape_0"><img src="" data-button-exec="clickshape" /></div></td>
        <td><div id="nb_shape_1"><img src="" data-button-exec="clickshape" /></div></td>
        <td><div id="nb_shape_2"><img src="" data-button-exec="clickshape" /></div></td>
        <td><div id="nb_shape_3"><img src="" data-button-exec="clickshape" /></div></td>
      </tr></table>
      <button type="button" class="btn btn-ok" data-button-exec="execute">__新規作成__Create__</button>
      <button type="button" class="btn" data-button-exec="close">__キャンセル__Cancel__</button>
    </form>
  </div>

  <div class="popup">
    <div class="titlebar">__URL入力__Import from URL__</div>
    <form name="urlinput">
      <span>__URLから問題を読み込みます。__Import a question from URL.__</span>
      <br />
      <textarea name="ta" cols=48 rows=8 wrap="hard"></textarea>
      <br />
      <button type="button" class="btn btn-ok" data-button-exec="urlinput">__読み込む__Import__</button>
      <button type="button" class="btn" data-button-exec="close">__キャンセル__Cancel__</button>
    </form>
  </div>

  <div class="popup">
    <div class="titlebar">__URL出力__Export URL__</div>
    <form name="urloutput">
      <button type="button" class="btn" data-button-exec="urloutput" name="pzprv3" >__ぱずぷれv3のURLを出力する__Output PUZ-PRE v3 URL__</button><br />
      <button type="button" class="btn" data-button-exec="urloutput" name="kanpen" >__カンペンのURLを出力する__Output Kanpen URL__</button><br />
      <button type="button" class="btn" data-button-exec="urloutput" name="heyaapp">__へやわけアプレットのURLを出力する__Output Heyawake-Applet URL__</button><br />
      <br />
      <textarea name="ta" cols=48 rows=8 wrap="hard" readonly></textarea>
      <br />
      <button type="button" class="btn btn-info" data-button-exec="openurl">__このURLを開く__Open this URL on another window/tab__</button>
      <button type="button" class="btn" data-button-exec="close">__閉じる__Close__</button>
    </form>
  </div>

  <div class="popup">
    <div class="titlebar">__画像を保存する__Save Image__</div>
    <form name="imagesave">
      <input type="hidden" name="operation" value="imagesave" />
      <input type="hidden" name="urlstr" value="" />
      <span>__ファイル形式__File format__</span>
      <select name="filetype" data-change-exec="changefilename">
        <option value="png">__PNG形式 (png)__PNG Format (png)__</option>
        <option value="svg">__ベクター画像(SVG)__Vector Image (SVG)__</option>
      </select>
      <br />
      <span>__ファイル名__Filename__</span>
      <input type="text" name="filename" value="" />
      <br />
      <span>__画像のサイズ__Image Size__</span>
      <input type="number" name="cellsize" value="36" size=4 maxlength=3 min=8 max=999 data-change-exec="estimatesize" />
      <span id="showsize">x</span>
      <br />
      <br />
      <button type="button" class="btn btn-ok"   data-button-exec="saveimage">__ダウンロード__Download__</button>
      <button type="button" class="btn btn-info" data-button-exec="openimage">__別ウィンドウで開く__Open in another window__</button>
      <button type="button" class="btn" data-button-exec="close">__閉じる__Close__</button>
    </form>
  </div>

  <div class="popup">
    <div class="titlebar">__盤面の調整__Board Dimension Resizer__</div>
    <form name="adjust">
      <span>__盤面の調整を行います。__Adjust the board.__</span>
      <br />
      <span>__拡大__Expand__</span>
      <button type="button" class="btn" data-button-exec="adjust" name="expandup">__上__Top__</button>
      <button type="button" class="btn" data-button-exec="adjust" name="expanddn">__下__Bottom__</button>
      <span> </span>
      <button type="button" class="btn" data-button-exec="adjust" name="expandlt">__左__Left__</button>
      <button type="button" class="btn" data-button-exec="adjust" name="expandrt">__右__right__</button>
      <br />
      <span>__縮小__Reduce__</span>
      <button type="button" class="btn" data-button-exec="adjust" name="reduceup">__上__Top__</button>
      <button type="button" class="btn" data-button-exec="adjust" name="reducedn">__下__Bottom__</button>
      <span> </span>
      <button type="button" class="btn" data-button-exec="adjust" name="reducelt">__左__Left__</button>
      <button type="button" class="btn" data-button-exec="adjust" name="reducert">__右__right__</button>
      <br />
      <button type="button" class="btn" data-button-exec="close">__閉じる__Close__</button>
    </form>
  </div>

  <div class="popup">
    <div class="titlebar">__反転・回転__Flip/Turn the board__</div>
    <form name="turnflip">
      <span>__盤面の回転・反転を行います。__Flip/Turn the board.__</span>
      <br />
      <button type="button" class="btn" data-button-exec="adjust" name="turnl">__左90°回転__Turn left by 90 degree__</button>
      <button type="button" class="btn" data-button-exec="adjust" name="turnr">__右90°回転__Turn right by 90 degree__</button>
      <br />
      <button type="button" class="btn" data-button-exec="adjust" name="flipy">__上下反転__Flip upside down__</button>
      <button type="button" class="btn" data-button-exec="adjust" name="flipx">__左右反転__Flip leftside right__</button>
      <br />
      <br />
      <button type="button" class="btn" data-button-exec="close">__閉じる__Close__</button>
    </form>
  </div>

  <div class="popup">
    <div class="titlebar">__表示サイズの変更__Change size__</div>
    <form name="dispsize">
      <span>__表示サイズを変更します。__Change the display size.__</span>
      <br />
      <span>__表示サイズ__Display size__</span>
      <input type="number" name="cellsize" value="" size=4 maxlength=3 min=8 max=999 />
      <br />
      <button type="button" class="btn btn-ok" data-button-exec="changesize">__変更する__Change__</button>
      <button type="button" class="btn" data-button-exec="close">__閉じる__Close__</button>
    </form>
  </div>

  <div class="popup">
    <div class="titlebar">__色の変更___Change Colors__</div>
    <form name="colors">
      <span>__黒マス (回答入力)__Shaded Cell (Answer)__</span>
      <input type="color" data-color-target="qanscolor" data-change-exec="setcolor" value="#000000" />
      <button type="button" class="btn btn-warn" data-color-target="qanscolor" data-button-exec="clearcolor">__クリア__Reset__</button>
      <br />
      <button type="button" class="btn" data-button-exec="close">__閉じる__Close__</button>
    </form>
  </div>

</div>

<!-- 隠し要素 -->
<div id="hidden_element">
  <!-- ファイル保存用アンカー -->
  <a id="saveanchor"></a>
</div>
<!-- ここまで -->

</BODY>
</HTML>
