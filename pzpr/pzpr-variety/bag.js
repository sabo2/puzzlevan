/*! @license pzpr.js v0.3.2 (c) 2009-2016 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["bag"],{MouseEvent:{bgcolor:!0,mouseinput:function(){var a=this.puzzle;if(a.playmode){var b=!1;if(this.mousestart)b=!!a.getConfig("bgcolor")&&this.inputBGcolor0();else{if(!this.mousemove)return;b=!!a.getConfig("bgcolor")&&this.inputData>=10}b?this.inputBGcolor(!1):"left"===this.btn?this.inputLine():"right"===this.btn&&this.inputBGcolor(!0)}else a.editmode&&this.mousestart&&this.inputqnum()},inputBGcolor0:function(){return this.getpos(.25).oncell()},inputBGcolor:function(a){var b=this.getcell();b.isnull||b===this.mouseCell||(null===this.inputData&&(a||"left"===this.btn?0===b.qsub?this.inputData=11:1===b.qsub?this.inputData=12:this.inputData=10:0===b.qsub?this.inputData=12:1===b.qsub?this.inputData=10:this.inputData=11),b.setQsub(this.inputData-10),b.draw(),this.mouseCell=b)}},KeyEvent:{enablemake:!0},Cell:{maxnum:function(){return Math.min(255,this.board.cols+this.board.rows-1)},minnum:2,inside:!1},Board:{hasborder:2,borderAsLine:!0,searchInsideArea:function(){this.cell[0].inside=0!==this.cross[0].lcnt;for(var a=1;a<this.maxby;a+=2){a>1&&(this.getc(1,a).inside=!!(this.getc(1,a-2).inside^this.getb(1,a-1).isLine()));for(var b=3;b<this.maxbx;b+=2)this.getc(b,a).inside=!!(this.getc(b-2,a).inside^this.getb(b-1,a).isLine())}}},LineGraph:{enabled:!0,pointgroup:"cross"},Graphic:{gridcolor_type:"DLIGHT",bgcellcolor_func:"qsub2",numbercolor_func:"qnum",paint:function(){this.drawBGCells(),this.drawDashedGrid(!1),this.drawLines(),this.drawNumbers(),this.drawTarget()}},Encode:{decodePzpr:function(a){this.decodeNumber16()},encodePzpr:function(a){this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellQsub(),this.decodeBorderLine()},encodeData:function(){this.encodeCellQnum(),this.encodeCellQsub(),this.encodeBorderLine()}},AnsCheck:{checklist:["checkLineExist+","checkBranchLine","checkCrossLine","checkOneLoop","checkDeadendLine+","checkOutsideNumber","checkViewOfNumber"],checkOutsideNumber:function(){this.board.searchInsideArea(),this.checkAllCell(function(a){return!a.inside&&a.isNum()},"nmOutside")},checkViewOfNumber:function(a){for(var b=this.board,c=0;c<b.cell.length;c++){var d=b.cell[c];if(d.isValidNum()){var e,f=new this.klass.CellList,g=d.adjacent;for(f.add(d),e=g.left;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.left;for(e=g.right;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.right;for(e=g.top;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.top;for(e=g.bottom;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.bottom;if(d.qnum!==f.length){if(this.failcode.add("nmSumViewNe"),this.checkOnly)break;f.seterr(1)}}}}},FailCode:{nmOutside:["輪の内側に入っていない数字があります。","There is an outside number."],nmSumViewNe:["数字と輪の内側になる4方向のマスの合計が違います。","The number and the sum of the inside cells of four direction is different."]}});